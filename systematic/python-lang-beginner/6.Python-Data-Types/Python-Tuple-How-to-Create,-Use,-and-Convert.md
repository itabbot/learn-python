# Python 元组：如何创建、使用和转换<!-- omit in toc -->

- [1. 创建 Python 元组](#1-创建-python-元组)
- [2. 使用 Python 元组进行多重赋值（解包）](#2-使用-python-元组进行多重赋值解包)
- [3. 索引访问](#3-索引访问)
- [4. 附加到 Python 元组](#4-附加到-python-元组)
- [5. 获取元组长度](#5-获取元组长度)
- [6. Python 元组与列表](#6-python-元组与列表)
- [7. 转换 Python 元组](#7-转换-python-元组)

## 1. 创建 Python 元组

使用可选的圆括号创建元组，如下所示：

```py
>>> my_numbers = (1, 2, 3)
>>> the_same = 1, 2, 3
>>> my_strings = ('Hello', 'World')
>>> my_mixed_tuple = ('Hello', 123, True)
```

和 Python 中的所有内容一样，元组是对象，并且有一个定义它们的类。我们还可以使用该类的构造函数 `tuple()` 创建元组。它允许任何 Python 可迭代类型作为参数。在下面的示例中，我们从列表创建一个元组：

```py
>>> tuple([0,1,2])
(0, 1, 2)
```

将多个列表解包为一个元组：

```py
>>> l1 = [1, 2, 3]
>>> l2 = [4, 5, 6]
>>> t = (*l1, *l2)
>>> t
(1, 2, 3, 4, 5, 6)
```

前导 `*` 运算符将列表解包为单个元素。就好像您在那个位置单独输入了它们一样。这个解包技巧适用于所有可迭代类型！

## 2. 使用 Python 元组进行多重赋值（解包）

多重赋值（解包）的工作方式如下：

```py
>>> person = ('Erik', 38, True)
>>> name, age, registered = person
>>> name
'Erik'
```

与使用 `*` 一样，这种解包适用于 Python 中的所有可迭代类型，包括列表和字符串。

正如我在 Python 函数返回多个值的技巧中所解释的那样，解包元组与返回多个值的函数配合使用效果很好。这是一种返回多个值的简洁方法，无需借助数据类或字典：

```py
def get_user_by_id(userid):
    # ....
    return name, age

name, age = get_user_by_id(4)
```

## 3. 索引访问

可以使用索引号来访问元组：

```py
>>> my_mixed_tuple = 'Hello', 123, True
>>> my_mixed_tuple[0]
'Hello'
>>> my_mixed_tuple[2]
True
```

## 4. 附加到 Python 元组

因为元组是不可变的，所以创建元组后不能向其追加数据。出于同样的原因，也不能从元组中删除数据。当然，你可以从旧元组创建新元组，然后通过以下方式向其追加额外的项：

```py
>>> t1 = (1, 2, 3)
>>> t = (*t1, 'Extra', 'Items')
>>> t
(1, 2, 3, 'Extra', 'Items')
```

## 5. 获取元组长度

该 `len()` 函数对 Python 元组的作用就像对所有其他可迭代类型（如列表和字符串）的作用一样：

```py
>>> t = 1, 2, 3
>>> len(t)
3
```

## 6. Python 元组与列表

Python 元组和 Python 列表之间最显著的区别是，列表是可变的，而元组不是。定义元组后，您不能添加或删除值。相反，列表允许您随意添加或删除值。此属性可能是一个优势；您可以将其视为写保护。如果某段数据不打算更改，则使用元组可以防止错误。毕竟，六个月后，您可能会忘记不应更改数据。使用元组可以防止错误。

另一个优点是元组更快，至少人们是这么说的。我还没有看到证据，但这是有道理的。由于元组是一种不可变的数据类型，因此它的内部实现可以比列表更简单。毕竟，它们不需要变大或在随机位置插入元素的方法，这些方法通常被实现为链表。据我所知，元组在 Python C 实现中使用了一个简单的类似数组的结构。

## 7. 转换 Python 元组

Python 列表是可变的，而元组则不是。如果需要，可以使用以下方法之一将元组转换为列表。

```py
# 使用构造方法
>>> t = 1, 2, 3
>>> list(t)
[1, 2, 3]

# 使用解包
>>> t = 1, 2, 3
>>> l = [*t]
>>> l
[1, 2, 3]
>>> l = [*t, 4, 5, 6]
>>> l
[1, 2, 3, 4, 5, 6]
```

类似于转换为列表，我们可以将元组转换为集合：

```py
# 使用构造方法
>>> t = (1, 2, 3)
>>> s = set(t)
>>> s
{1, 2, 3}

# 使用解包
>>> s = {*t}
>>> s
{1, 2, 3}
```
