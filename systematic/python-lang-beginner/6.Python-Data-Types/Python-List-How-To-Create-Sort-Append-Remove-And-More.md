# Python 列表：如何创建、排序、附加、删除等<!-- omit in toc -->

- [1. 如何创建 Python 列表](#1-如何创建-python-列表)
- [2. 访问 Python 列表元素](#2-访问-python-列表元素)
- [3. 添加和删除元素](#3-添加和删除元素)
  - [3.1. 追加到列表尾部](#31-追加到列表尾部)
  - [3.2. 合并列表](#32-合并列表)
  - [3.3. 从列表中弹出元素](#33-从列表中弹出元素)
  - [3.4. 使用 `del()` 删除元素](#34-使用-del-删除元素)
  - [3.5. 从 Python 列表中删除特定值](#35-从-python-列表中删除特定值)
  - [3.6. 删除或清除 Python 列表中的所有项目](#36-删除或清除-python-列表中的所有项目)
- [4. 如何在 Python 中获取列表长度](#4-如何在-python-中获取列表长度)
- [5. 计算列表中元素的出现次数](#5-计算列表中元素的出现次数)
- [6. 检查某项是否在列表中](#6-检查某项是否在列表中)
- [7. 查找列表中项目的索引](#7-查找列表中项目的索引)
- [8. 循环列表元素](#8-循环列表元素)
- [9. 对 Python 列表进行排序](#9-对-python-列表进行排序)
- [10. 切片](#10-切片)

## 1. 如何创建 Python 列表

列表包含常规 Python 对象，以逗号分隔并用括号括起来。列表中的元素可以是任何数据类型，也可以是混合类型。您甚至可以创建列表列表。以下列表均有效：

```py
>>> my_list = [1, 2, 3]
>>> my_list
[1, 2, 3]

>>> my_list2 = [1, "Erik", { 'age': 39 }]
>>> my_list2
[1, 'Erik', {'age': 39}]

>>> empty_list = []
>>> empty_list
[]

>>> nest_list = [[], [], []]
>>> nest_list
[[], [], []]
```

Python 列表与所有 Python 数据类型一样，都是对象。列表的类称为 “list”。如果要将另一个 Python 对象转换为列表，可以使用 `list()` 函数，该函数实际上是列表类本身的构造函数。此函数接受一个参数：一个可迭代的对象。

```py
>>> list(range(1, 4))
[1, 2, 3]
>>> list({1, 2, 2, 2, 3})
[1, 2, 3]
>>> list( (1, 2, 3) )
[1, 2, 3]
```

## 2. 访问 Python 列表元素

要访问单个列表元素，您需要知道该元素的位置。由于计算机从 0 开始计数，因此第一个元素位于位置 0，第二个元素位于位置 1，依此类推。比如：

```py
>>> my_list = [1, 2, 3]
>>> my_list[1]
2
>> my_list[0]
1

# 您无法访问不存在的元素。在这种情况下，Python 会抛出 IndexError 异常，并给出解释“列表索引超出范围”
>> my_list[4]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
```

如果要从列表末尾获取元素，可以提供负值。在这种情况下，我们从 -1 开始计数，而不是从 0 开始。例如，要获取列表的最后一个元素，您可以执行以下操作：

```py
>>> my_list = [ 1 , 2 , 3 ]

# 获取最后一个元素
>>> my_list [ -1 ]
3

# 获取倒数第二个元素
>>> my_list [ -2 ]
2
```

访问嵌套列表元素并没有太大不同。当您访问列表元素时，将返回该列表。因此，只需要再次使用几个括号：

```py
>>> my_list = [[1, 2], [3, 4], [5, 6]]
>>> my_list[0]
[1, 2]
>> my_list[0][0]
1
>>> my_list[2][1]
6
```

## 3. 添加和删除元素

### 3.1. 追加到列表尾部

列表对象有许多有用的内置方法，其中之一就是 `append` 方法。在列表上调用 `append` 时，我们会将一个对象附加到列表的末尾：

```py
>>> my_list = [1, 2]
>>> my_list.append('a')
>>> my_list
[1, 2, 'a']
>>> my_list.append(4)
>>> my_list
[1, 2, 'a', 4]
```

### 3.2. 合并列表

添加元素的另一种方法是将一个列表中的所有元素添加到另一个列表中。组合列表的方法有两种：

-   使用 + 运算符将它们“添加”在一起。
-   使用扩展方法将一个列表的所有元素添加到另一个列表中。

```py
>>> l1 = [ 1 , 2 ]
>>> l2 = [ 3 , 4 ]

# 使用 + 运算符将它们“添加”在一起。
>>> l3 = l1 + l2
>>> l3
[ 1 , 2 , 3 , 4 ]

# 使用扩展方法将一个列表的所有元素添加到另一个列表中
>>> l1.extend(l2)
>>> l1
[1, 2, 3, 4]
>>> l2
[3, 4]
```

### 3.3. 从列表中弹出元素

`pop()` 方法默认会删除并返回最后一项，除非您为其提供索引参数。删除后会返回从列表中删除的元素：

```py
>>> my_list = [ 1 , 2 , 3 , 4 , 5 ]
>>> my_list.pop()
5
>>> my_list
[1, 2, 3, 4]
>>> my_list.pop()
4
>>> my_list
[1, 2, 3]
>>> my_list.pop(0)
1
>>> my_list
[2, 3]
```

### 3.4. 使用 `del()` 删除元素

有多种方法可以从列表中删除或移除项目。`pop` 返回从列表中删除的项目，而 `del` 将其移除而不返回任何内容。实际上，您可以使用 `del` 删除任何对象，包括整个列表：

```py
>>> my_list = [1, 2, 3, 4, 5]
>>> del(my_list[0])
>>> my_list
[2, 3, 4, 5]
>>> del(my_list[2])
>>> my_list
[2, 3, 5]
>>> del(my_list)
>>> my_list
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'my_list' is not defined
```

### 3.5. 从 Python 列表中删除特定值

如果您想删除特定值，请使用 `remove` 方法。例如，如果您想删除列表中第一次出现的数字 2，您可以按如下方式操作：

```py
>>> my_list = [1, 2, 3, 2, 5]
>>> my_list.remove(2)
>>> my_list
[1, 3, 2, 5]
>>> my_list.remove(2)
>>> my_list
[1, 3, 5]
>>> my_list.remove(2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: list.remove(x): x not in list
```

### 3.6. 删除或清除 Python 列表中的所有项目

要从列表中删除所有项目，请使用以下 `clear()` 命令：

```py
>>> my_list = [1, 2, 3]
>>> my_list.clear()
>>> my_list
[]
```

## 4. 如何在 Python 中获取列表长度

在 Python 中，我们使用 len 函数来获取列表的长度：

```py
>>> my_list = [1, 2, 3, 4, 5]
>>> len(my_list)
5
```

## 5. 计算列表中元素的出现次数

不要将 `count` 函数与获取列表长度相混淆，它们完全不同。内置 `count` 函数会计算列表中特定值的出现次数。以下是示例：

```py
>>> my_list = [1, 2, 1, 4, 1, 7]
>>> my_list.count(1)
3
>>> my_list.count(4)
1
```

## 6. 检查某项是否在列表中

要检查某项是否在列表中，请使用以下语法：

```py
>>> my_list = [1, 2]
>>> if 1 in my_list:
...    print("It's in the list")
...
It's in the list
```

## 7. 查找列表中项目的索引

我们可以使用 `index` 方法找到列表中某个项目的位置：

```py
>>> my_list = [1, 2, 3, 4, 5]
>>> my_list.index(4)
3
```

`index` 方法采用两个可选参数：start 和 stop。有了这些参数，我们可以继续寻找更多相同的值。

```py
>>> my_list = [1, 2, 3, 4, 5, 4]
>>> my_list.index(4)
3
>>> my_list.index(4, 4)
5
```

## 8. 循环列表元素

列表是可迭代的，因此我们可以对列表的元素使用 for 循环：

```py
>>> my_list = [1, 2, 3, 4, 5]
>>> for n in my_list:
...     print(n)
...
1
2
3
4
5
```

## 9. 对 Python 列表进行排序

按升序就地排序列表：

```py
>>> my_list = [10, 2, 5, 4, 2]
>>> my_list.sort()
>>> my_list
[2, 2, 4, 5, 10]
```

我们可以使用 `reverse` 参数调用 `sort` 方法。如果将其设置为 True，sort 将反转顺序：

```py
>>> my_list = [10, 2, 5, 4, 2]
>>> my_list.sort(reverse=True)
>>> my_list
[10, 5, 4, 2, 2]
```

使用 `sorted()` 并返回包含结果的新列表：

```py
# 升序
>>> my_list = [10, 2, 5, 4, 2]
>>> sorted(my_list)
[2, 2, 4, 5, 10]
>>> my_list
[10, 2, 5, 4, 2]

# 降序
>>> sorted(my_list, reverse=True)
[10, 5, 4, 2, 2]
>>> my_list
[10, 2, 5, 4, 2]
```

我们不能对所有列表进行排序，因为 Python 无法将所有类型相互比较。例如，我们可以对数字列表（如整数和浮点数）进行排序，因为它们具有定义的顺序。我们也可以对字符串列表进行排序，因为 Python 也能够比较字符串。但是，列表可以包含任何类型的对象，并且我们无法将完全不同的对象（如数字和字符串）相互比较。在这种情况下，Python 会抛出一个 TypeError：

```py
>>> my_mixed_list = [1, 'a', 2, 'B']
>>> my_mixed_list.sort()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: '<' not supported between instances of 'str' and 'int'
```

## 10. 切片

有时您需要获取列表的某些部分。Python 有一个强大的语法可以实现这一点，称为切片，与其他一些编程语言相比，它使列表的处理变得容易得多。切片适用于 Python 列表，但它也适用于任何其他序列类型，如字符串、元组和范围。

切片语法如下：

```
my_list [start:stop:step]
```

几点说明：

-   start： 要包含的第一个元素位置；默认为 0；负数表示从右侧开始。
-   stop： 结束的元素位置，是排他性的，这意味着 stop 位置处的元素将不会被包括在内；默认为列表的长度；负数表示从右侧开始。
-   step： 步长，表示每次获取元素时跳过的元素个数；默认为 1；负数表示从右往左处理。
-   start、stop 和 step 均为可选。

示例：

```py
>>> my_list = [1, 2, 3, 4, 5, 6, 7, 8]

>>> my_list[0:3]
[1, 2, 3]

>>> my_list[:3]
[1, 2, 3]

>>> my_list[4:]
[5, 6, 7, 8]
```

步长值默认为 1。如果增加它，则可以跨元素：

```py
>>> my_list = [1, 2, 3, 4, 5, 6, 7, 8]

# 没次两步，即跳过一个
>>> my_list[::2]
[1, 3, 5, 7]
```

与列表索引一样，我们也可以通过切片提供负数：

```py
# [1 , 2, 3, 4, 5, 6]
#  -6 -5 -4 -3 -2 -1

>>> my_list = [1, 2, 3, 4, 5, 6]
>>> my_list[-1:-3:-1]
[6, 5]
```
